define(["domReady","backbonestore"],function(e,t){function i(e){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}var n={},r={};return i("/resources/js/app/ui-modules/onoffswitch/ui/onoffswitch.css"),r.View=t.View.extend({events:{"click .js-onoffswitch :checkbox":"onOnOffSwitchClick"},settings:{},pending:{hide:!1,show:!1},el:".js-onoffswitch",model:new t.Model,initialize:function(e){_.extend(this.settings,e),_.bindAll(this,"render","renderCallback","onOnOffSwitchClick","onOnOffSwitchChanged","onVisibleChanged","onRenderCompleted","show","hide"),this.model.on("change:switch",this.onOnOffSwitchChanged),this.model.on("change:visible",this.onVisibleChanged),this.model.on("change:renderCompleted",this.onRenderCompleted),this.options.cookieName&&$.cookie(this.options.cookieName)=="off"?this.model.set("switch","off"):this.model.set("switch","on"),this.reRendering=!1,this.render()},render:function(){this.options.attachedElement&&(this.$ael=$(this.options.attachedElement)),this.$ael&&this.$ael.length>0&&this.$ael.hide(),this.model.set("renderCompleted",!1),HMSTemplate.get("text!app/ui-modules/onoffswitch/template/onoffswitch.html",this.renderCallback)},renderCallback:function(e){this.options.cookieName&&(this.options.checked=$.cookie(this.options.cookieName)=="on");var t=e.render(this.options);$(".js-onoffswitch").replaceWith(t),this.setElement(".js-onoffswitch"),this.reRendering?(this.onOnOffSwitchChanged(this.model,this.model.get("switch")),this.onVisibleChanged(this.model,this.model.get("visible"))):this.reRendering=!0;if(jQuery.browser.msie&&jQuery.browser.version=="8.0"){$.cookie(this.options.cookieName)=="on"&&$(".js-onoffswitch ").addClass("onoffswitch-checked");var n=this;$(".onoffswitch-label").click(function(e){$(this).parent().toggleClass("onoffswitch-checked"),$(".js-onoffswitch ").hasClass("onoffswitch-checked")?n.model.set("switch","on"):n.model.set("switch","off")})}this.model.set("renderCompleted",!0)},onOnOffSwitchClick:function(e){var t=$(e.currentTarget);t.is(":checked")?(this.model.set("switch","on"),HMSEvent.trigger("trackSwitchClick",{action:"INRIXDriveTime - ON"})):(this.model.set("switch","off"),HMSEvent.trigger("trackSwitchClick",{action:"INRIXDriveTime - OFF"}))},onOnOffSwitchChanged:function(e,t){this.options.cookieName&&$.cookie(this.options.cookieName,t,{path:"/"}),this.model.get("visible")&&t=="on"&&this.$ael&&this.$ael.length>0&&(jQuery.browser.msie&&jQuery.browser.version=="8.0"?this.$ael.show():this.$ael.animate({height:"toggle",display:"block"},"slow"),this.options.onAttachedElementShow&&this.options.onAttachedElementShow()),t=="off"&&this.$ael&&this.$ael.length>0&&(jQuery.browser.msie&&jQuery.browser.version=="8.0"?this.$ael.hide():this.$ael.animate({height:"toggle",display:"none"},"slow"),this.options.onAttachedElementHide&&this.options.onAttachedElementHide())},onVisibleChanged:function(e,t){t?($(".js-onoffswitch").show(),this.model.get("switch")=="on"?(this.$ael&&this.$ael.length>0&&this.$ael.show(),this.options.onAttachedElementShow&&this.options.onAttachedElementShow()):(this.$ael&&this.$ael.length>0&&this.$ael.hide(),this.options.onAttachedElementHide&&this.options.onAttachedElementHide())):($(".js-onoffswitch").hide(),this.$ael&&this.$ael.length>0&&this.$ael.hide(),this.options.onAttachedElementHide&&this.options.onAttachedElementHide())},onRenderCompleted:function(e,t){t&&(this.pending.hide&&(this.pending.hide=!1,this.hide()),this.pending.show&&(this.pending.show=!1,this.show()),this.options.onOnOffSwitchRenderCompleted&&this.options.onOnOffSwitchRenderCompleted())},show:function(){this.model.get("renderCompleted")?this.model.set("visible",!0):this.pending.show=!0},hide:function(){this.model.get("renderCompleted")?this.model.set("visible",!1):this.pending.hide=!0}}),n=r,n})