var PubSub={};(function(e){e.version="1.0.1";var t={},n=-1,r=function(e,n,r){if(!t.hasOwnProperty(e))return!1;var i=function(){var r=t[e],i=function(e){return function(){throw e}};for(var s=0,o=r.length;s<o;s++)try{r[s].func(e,n)}catch(u){setTimeout(i(u),0)}};return r===!0?i():setTimeout(i,0),!0};e.publish=function(e,t){return r(e,t,!1)},e.publishSync=function(e,t){return r(e,t,!0)},e.subscribe=function(e,r){t.hasOwnProperty(e)||(t[e]=[]);var i=(++n).toString();return t[e].push({token:i,func:r}),i},e.unsubscribe=function(e){for(var n in t)if(t.hasOwnProperty(n))for(var r=0,i=t[n].length;r<i;r++)if(t[n][r].token===e)return t[n].splice(r,1),e;return!1}})(PubSub)