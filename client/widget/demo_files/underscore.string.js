(function(e){var t=String.prototype.trim,n=function(e){return e*1||0},r=function(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")},i=function(e){return Array.prototype.slice.call(e)},s=function(e){return e?a.escapeRegExp(e):"\\s"},o=function(e){return function(){var t=i(arguments);for(var n=0;n<t.length;n++)t[n]=t[n]==null?"":""+t[n];return e.apply(null,t)}},u=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var t=r,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){var i=1,s=n.length,o="",a,f=[],l,c,h,p,d,v;for(l=0;l<s;l++){o=e(n[l]);if(o==="string")f.push(n[l]);else if(o==="array"){h=n[l];if(h[2]){a=r[i];for(c=0;c<h[2].length;c++){if(!a.hasOwnProperty(h[2][c]))throw u('[_.sprintf] property "%s" does not exist',h[2][c]);a=a[h[2][c]]}}else h[1]?a=r[h[1]]:a=r[i++];if(/[^s]/.test(h[8])&&e(a)!="number")throw u("[_.sprintf] expecting number but found %s",e(a));switch(h[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=h[7]?a.toExponential(h[7]):a.toExponential();break;case"f":a=h[7]?parseFloat(a).toFixed(h[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&h[7]?a.substring(0,h[7]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(h[8])&&h[3]&&a>=0?"+"+a:a,d=h[4]?h[4]=="0"?"0":h[4].charAt(1):" ",v=h[6]-String(a).length,p=h[6]?t(d,v):"",f.push(h[5]?a+p:p+a)}}return f.join("")},n.cache={},n.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw"[_.sprintf] huh?";if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw"[_.sprintf] huh?";s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw"[_.sprintf] huh?";s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw"[_.sprintf] mixing positional and named placeholders is not (yet) supported";r.push(n)}t=t.substring(n[0].length)}return r},n}(),a={VERSION:"2.0.0",isBlank:o(function(e){return/^\s*$/.test(e)}),stripTags:o(function(e){return e.replace(/<\/?[^>]+>/ig,"")}),capitalize:o(function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()}),chop:o(function(e,t){t=n(t)||e.length;var r=[];for(var i=0;i<e.length;)r.push(e.slice(i,i+t)),i+=t;return r}),clean:o(function(e){return a.strip(e.replace(/\s+/g," "))}),count:o(function(e,t){var n=0,r;for(var i=0;i<e.length;)r=e.indexOf(t,i),r>=0&&n++,i=i+(r>=0?r:0)+t.length;return n}),chars:o(function(e){return e.split("")}),escapeHTML:o(function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}),unescapeHTML:o(function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&")}),escapeRegExp:o(function(e){return e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")}),insert:o(function(e,t,r){var i=e.split("");return i.splice(n(t),0,r),i.join("")}),include:o(function(e,t){return e.indexOf(t)!==-1}),join:o(function(e){var t=i(arguments);return t.join(t.shift())}),lines:o(function(e){return e.split("\n")}),reverse:o(function(e){return Array.prototype.reverse.apply(String(e).split("")).join("")}),splice:o(function(e,t,r,i){var s=e.split("");return s.splice(n(t),n(r),i),s.join("")}),startsWith:o(function(e,t){return e.length>=t.length&&e.substring(0,t.length)===t}),endsWith:o(function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}),succ:o(function(e){var t=e.split("");return t.splice(e.length-1,1,String.fromCharCode(e.charCodeAt(e.length-1)+1)),t.join("")}),titleize:o(function(e){var t=e.split(" "),n;for(var r=0;r<t.length;r++)n=t[r].split(""),typeof n[0]!="undefined"&&(n[0]=n[0].toUpperCase()),r+1===t.length?t[r]=n.join(""):t[r]=n.join("")+" ";return t.join("")}),camelize:o(function(e){return a.trim(e).replace(/(\-|_|\s)+(.)?/g,function(e,t,n){return n?n.toUpperCase():""})}),underscored:function(e){return a.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/\-|\s+/g,"_").toLowerCase()},dasherize:function(e){return a.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1-$2").replace(/^([A-Z]+)/,"-$1").replace(/\_|\s+/g,"-").toLowerCase()},humanize:function(e){return a.capitalize(this.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:o(function(e,n){return!n&&t?t.call(e):(n=s(n),e.replace(new RegExp("^["+n+"]+|["+n+"]+$","g"),""))}),ltrim:o(function(e,t){return t=s(t),e.replace(new RegExp("^["+t+"]+","g"),"")}),rtrim:o(function(e,t){return t=s(t),e.replace(new RegExp("["+t+"]+$","g"),"")}),truncate:o(function(e,t,r){return r=r||"...",t=n(t),e.length>t?e.slice(0,t)+r:e}),prune:o(function(e,t,r){var i=function(e){return e.toUpperCase()!=e.toLowerCase()||/[-_\d]/.test(e)},s="",o="",u=0;r=r||"...",t=n(t);for(u in e)s+=i(e[u])?"A":" ";return s.substring(t-1,t+1).search(/^\w\w$/)===0?o=a.rtrim(s.slice(0,t).replace(/([\W][\w]*)$/,"")):o=a.rtrim(s.slice(0,t)),o=o.replace(/\W+$/,""),o.length+r.length>e.length?e:e.substring(0,o.length)+r}),words:function(e,t){return String(e).split(t||" ")},pad:o(function(e,t,i,s){var o="",u=0;t=n(t),i?i.length>1&&(i=i.charAt(0)):i=" ";switch(s){case"right":u=t-e.length,o=r(i,u),e+=o;break;case"both":u=t-e.length,o={left:r(i,Math.ceil(u/2)),right:r(i,Math.floor(u/2))},e=o.left+e+o.right;break;default:u=t-e.length,o=r(i,u),e=o+e}return e}),lpad:function(e,t,n){return a.pad(e,t,n)},rpad:function(e,t,n){return a.pad(e,t,n,"right")},lrpad:function(e,t,n){return a.pad(e,t,n,"both")},sprintf:u,vsprintf:function(e,t){return t.unshift(e),u.apply(null,t)},toNumber:function(e,t){var r=n(n(e).toFixed(n(t)));return r!==0||e==="0"||e===0?r:Number.NaN},strRight:o(function(e,t){var n=t?e.indexOf(t):-1;return n!=-1?e.slice(n+t.length,e.length):e}),strRightBack:o(function(e,t){var n=t?e.lastIndexOf(t):-1;return n!=-1?e.slice(n+t.length,e.length):e}),strLeft:o(function(e,t){var n=t?e.indexOf(t):-1;return n!=-1?e.slice(0,n):e}),strLeftBack:o(function(e,t){var n=e.lastIndexOf(t);return n!=-1?e.slice(0,n):e}),exports:function(){var e={};for(var t in this){if(!this.hasOwnProperty(t)||t=="include"||t=="contains"||t=="reverse")continue;e[t]=this[t]}return e}};a.strip=a.trim,a.lstrip=a.ltrim,a.rstrip=a.rtrim,a.center=a.lrpad,a.ljust=a.lpad,a.rjust=a.rpad,a.contains=a.include,_.mixin(a.exports())})(this||window)