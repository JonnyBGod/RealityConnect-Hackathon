define(["domReady","underscore","backbone","hmsglobal","innershiv","scroller","jquery-plugins/jqueryui.position","jquery-plugins/jquery.timers","jquery-plugins/jquery.enExtensions","./ui/jquery.hmsautocomplete"],function(e,t,n,r){function o(){var e=[],t;for(t=1;t<=9;t++)e.push(t*1e3);for(t=1;t<=9;t++)e.push(t*1e4),e.push(t*1e4+5e3);for(t=1;t<=9;t++)e.push(t*1e5),e.push(t*1e5+5e4);for(t=1;t<=9;t++)e.push(t*1e6),e.push(t*1e6+25e4),e.push(t*1e6+5e5),e.push(t*1e6+75e4);return e}function u(){var e=[],t;for(t=1;t<=9;t++)e.push(t*1e3),e.push(t*1e3+500);for(t=1;t<=9;t++)e.push(t*1e4),e.push(t*1e4+5e3);return e}var i={},s="/resources/js/app/ui-modules/autocomplete";return i.View=n.View.extend({defaultOptions:{el:$("body"),templateType:"table",url:"/api/autosuggest/?js=1&location=true&count=10&types=1,2,3,28,29,31,100"},events:{"focus .js-autocomplete-price":"createCurrencyAutocomplete","focus .js-autocomplete-footage":"createAutocomplete","focus .js-control-autocomplete-true":"createAjaxAutocomplete","focus .js-autocomplete-listings":"createAjaxAutocomplete","focus .js-autocomplete-mls":"createAjaxAutocompleteMLS","focus .js-control-simple-autocomplete-true":"createSimpleAjaxAutocomplete","focus .js-autocomplete-homevalue-listings":"createHomeValueAjaxAutocomplete"},initialize:function(e){this.settings={},$.extend(this.settings,this.defaultOptions,e),this.setElement(this.settings.el),this.delegateEvents()},createCurrencyAutocomplete:function(e){var t=$(e.currentTarget),n=o();if(!t.data("create-autocomplete")){t.attr("autocomplete","off");var i={options:n,utilities:r,currency:t.data("nocurrencyformat")?!1:!0,onSelect:function(){t.trigger("blur")}};priceAutocomplete=new $.hmsautocomplete(t,i),priceAutocomplete.create()}},createAutocomplete:function(e){var t=$(e.currentTarget),n=u();t.data("create-autocomplete")||(t.attr("autocomplete","off"),sqftAutocomplete=new $.hmsautocomplete(t,{options:n,onSelect:function(){t.trigger("blur")}}),sqftAutocomplete.create())},createHomeValueAjaxAutocomplete:function(e){var n=$(e.currentTarget),r=this;n.data("create-autocomplete")||(n.attr("autocomplete","off"),r.settings.url="/api/autosuggest/?",n.data("create-autocomplete",!0).unbind("focus"),r.settings.onComplete=function(e,n){r.settings.templateType="table_homevalues",require(["text!"+s+"/templates/"+r.settings.templateType+".html"],function(r){var r=t.template(r),i=r({key:e.el.attr("id"),data:n});e.render(i)})},searchAutocomplete=new $.hmsautocomplete(n,r.settings),searchAutocomplete.create())},createSimpleAjaxAutocomplete:function(e){var n=$(e.currentTarget),r=this;n.data("create-autocomplete")||(n.attr("autocomplete","off"),r.settings.url="/proxy/autosuggest.aspx?js=1&ss=1",n.data("create-autocomplete",!0).unbind("focus"),r.settings.onComplete=function(e,n){r.settings.templateType="table_simple_search",require(["text!"+s+"/templates/"+r.settings.templateType+".html"],function(r){var r=t.template(r),i=r({key:e.el.attr("id"),data:n});e.render(i)})},searchAutocomplete=new $.hmsautocomplete(n,r.settings),searchAutocomplete.create())},createAjaxAutocomplete:function(e){var n=$(e.currentTarget),r=this;n.data("create-autocomplete")||(n.attr("autocomplete","off"),n.data("url")?r.settings.url=n.data("url")+"?js=1":r.settings.url="/api/autosuggest/?js=1&location=true&count=10&types=1,2,3,28,29,31,100",n.data("create-autocomplete",!0).unbind("focus"),r.settings.onComplete=function(e,i){i&&i.length>0&&i.ListingCounts[0].TotalAgents&&(r.settings.templateType="table_listings_agents"),n.data("template")&&(r.settings.templateType=n.data("template"),i.response&&(r.settings.templateType+="2")),require(["text!"+s+"/templates/"+r.settings.templateType+".html"],function(n){var n=t.template(n),r=n({key:e.el.attr("id"),data:i});e.render(r)})},searchAutocomplete=new $.hmsautocomplete(n,r.settings),searchAutocomplete.create())},createAjaxAutocompleteMLS:function(e){var n=$(e.currentTarget),r=this;n.data("create-autocomplete")||(n.attr("autocomplete","off"),r.settings.url="/api/autosuggest/?js=1&mls=true",n.data("create-autocomplete",!0).unbind("focus"),r.settings.onComplete=function(e,i){r.settings.templateType="table_mls_listings",n.data("template")&&(r.settings.templateType=n.data("template")),require(["text!"+s+"/templates/"+r.settings.templateType+".html"],function(n){var n=t.template(n),r=n({key:e.el.attr("id"),data:i});e.render(r)})},searchAutocomplete=new $.hmsautocomplete(n,r.settings),searchAutocomplete.create())}}),i.execute=function(){new i.View},i})